<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameZame - Populate Games</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #0a0a0f;
            color: #fff;
            padding: 40px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 { color: #ff4444; }
        .btn {
            background: linear-gradient(135deg, #ff4444, #ff8c00);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .btn:hover { opacity: 0.9; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        #log {
            background: #12121a;
            border: 1px solid #2a2a35;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            max-height: 500px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 13px;
        }
        .success { color: #00ff88; }
        .error { color: #ff4444; }
        .info { color: #00d4ff; }
    </style>
</head>
<body>
    <h1>üéÆ GameZame - Add Free Games</h1>
    <p>Click the button below to populate your database with free games that have working download links and images.</p>
    
    <button class="btn" onclick="clearAllGames()">üóëÔ∏è Clear All Games First</button>
    <button class="btn" onclick="addAllGames()">‚ûï Add All Free Games</button>
    
    <div id="log"></div>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'
        
        const SUPABASE_URL = 'https://ehviqqjhbrcszfkyozqq.supabase.co'
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVodmlxcWpoYnJjc3pma3lvenFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc3OTM3MTksImV4cCI6MjA4MzM2OTcxOX0.8TlD3ybOwJ5z1ZawfCVACVJzxHNCPr_s_lW1w5S6ANs'
        
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY)
        
        // Free games with REAL working download links and images
        const freeGames = [
            // ACTION GAMES
            {
                title: "Xonotic",
                description: "Fast-paced first-person arena shooter with futuristic weapons. Features multiple game modes including deathmatch, CTF, and more.",
                download_url: "https://dl.xonotic.org/xonotic-0.8.6.zip",
                image_url: "https://xonotic.org/static/img/screenshots/xonotic-screenshots-02.jpg",
                category: "Shooter"
            },
            {
                title: "AssaultCube",
                description: "FREE multiplayer first-person shooter based on the CUBE engine. Lightweight and runs on almost any hardware.",
                download_url: "https://github.com/assaultcube/AC/releases/download/v1.3.0.2/AssaultCube_v1.3.0.2.exe",
                image_url: "https://assault.cubers.net/images/screenshot1.jpg",
                category: "Shooter"
            },
            {
                title: "OpenArena",
                description: "Community-produced deathmatch FPS based on GPL idTech3 technology. Fast action multiplayer shooter.",
                download_url: "https://sourceforge.net/projects/oarena/files/openarena-0.8.8.zip/download",
                image_url: "https://openarena.ws/e107_images/custom/oa_005.jpg",
                category: "Shooter"
            },
            {
                title: "Teeworlds",
                description: "Free online multiplayer 2D shooter game with cute graphics but hardcore gameplay mechanics.",
                download_url: "https://github.com/teeworlds/teeworlds/releases/download/0.7.5/teeworlds-0.7.5-win64.zip",
                image_url: "https://www.teeworlds.com/images/screenshots/screenshot_grass.png",
                category: "Action"
            },
            
            // STRATEGY GAMES
            {
                title: "0 A.D.",
                description: "Free, open-source real-time strategy game of ancient warfare. Build empires and conquer enemies across historical civilizations.",
                download_url: "https://releases.wildfiregames.com/0ad-0.0.26-alpha-win32.exe",
                image_url: "https://play0ad.com/wp-content/gallery/screenshots/A26-screenshot-01.jpg",
                category: "Strategy"
            },
            {
                title: "Battle for Wesnoth",
                description: "Turn-based tactical strategy game with a high fantasy theme. Features deep campaigns and multiplayer support.",
                download_url: "https://sourceforge.net/projects/wesnoth/files/wesnoth-1.18/wesnoth-1.18.0/wesnoth-1.18.0-win64.exe/download",
                image_url: "https://wiki.wesnoth.org/images/thumb/8/87/Wesnoth_-_1.16.0_-_1.jpg/1200px-Wesnoth_-_1.16.0_-_1.jpg",
                category: "Strategy"
            },
            {
                title: "Warzone 2100",
                description: "Real-time strategy and real-time tactics hybrid game set in a post-apocalyptic world. Features 400+ technologies to research.",
                download_url: "https://github.com/Warzone2100/warzone2100/releases/download/4.4.2/warzone2100_win_x64_installer.exe",
                image_url: "https://wz2100.net/img/screenshots/wz_4.jpg",
                category: "Strategy"
            },
            {
                title: "Freeciv",
                description: "Free empire-building strategy game inspired by Civilization series. Rule your civilization from ancient times to space age.",
                download_url: "https://files.freeciv.org/packages/windows/Freeciv-3.0.10-msys2-win64-gtk3.22-setup.exe",
                image_url: "https://freeciv.org/images/shots/freeciv-3.0-turn-start.png",
                category: "Strategy"
            },
            {
                title: "OpenRA",
                description: "Free RTS game engine supporting Command & Conquer, Red Alert, and Dune 2000. Classic RTS gameplay with modern features.",
                download_url: "https://github.com/OpenRA/OpenRA/releases/download/release-20231010/OpenRA-release-20231010-x64.exe",
                image_url: "https://www.openra.net/images/news/20200629-td-season4.png",
                category: "Strategy"
            },
            
            // RPG GAMES
            {
                title: "Flare RPG",
                description: "Free action RPG with beautiful isometric graphics. Explore dungeons, fight monsters, and collect epic loot.",
                download_url: "https://github.com/flareteam/flare-game/releases/download/v1.14/flare_game_windows.zip",
                image_url: "https://flarerpg.org/images/screenshots/ingame01.jpg",
                category: "RPG"
            },
            {
                title: "Tales of Maj'Eyal",
                description: "Deep roguelike RPG with complex character development and tactical combat. Hundreds of hours of gameplay.",
                download_url: "https://te4.org/dl/t-engine/t-engine4-windows-1.7.6.zip",
                image_url: "https://te4.org/sites/te4.org/files/screenshot_1_0.png",
                category: "RPG"
            },
            {
                title: "Veloren",
                description: "Open-world multiplayer voxel RPG inspired by Cube World. Explore vast landscapes and fight monsters with friends.",
                download_url: "https://veloren.net/download/",
                image_url: "https://veloren.net/assets/veloren-logo.png",
                category: "RPG"
            },
            {
                title: "The Dark Mod",
                description: "FREE stealth game inspired by Thief series. Sneak through missions, steal treasure, and avoid detection.",
                download_url: "https://www.thedarkmod.com/downloads/",
                image_url: "https://www.thedarkmod.com/wp-content/uploads/2019/10/screenshot_1.jpg",
                category: "RPG"
            },
            
            // PLATFORMER GAMES
            {
                title: "SuperTux",
                description: "Classic 2D platformer featuring Tux the Linux penguin. Jump through worlds collecting items and defeating enemies.",
                download_url: "https://github.com/SuperTux/supertux/releases/download/v0.6.3/SuperTux-v0.6.3-win64.msi",
                image_url: "https://www.supertux.org/images/screenshots/0.6.0/0.6.0-1.png",
                category: "Platformer"
            },
            {
                title: "Cave Story",
                description: "Legendary indie platformer. Explore mysterious caves, fight robots, and uncover the story. A true classic.",
                download_url: "https://www.cavestory.org/downloads/cavestoryen.zip",
                image_url: "https://www.cavestory.org/images/cavestory_en_screenshot.png",
                category: "Platformer"
            },
            {
                title: "Frogatto",
                description: "Beautiful pixel art platformer. Help Frogatto hop through a dangerous world filled with adventure.",
                download_url: "https://frogatto.com/download/",
                image_url: "https://frogatto.com/wp-content/uploads/2020/03/frogatto_screenshot_1.png",
                category: "Platformer"
            },
            {
                title: "Secret Maryo Chronicles",
                description: "Two-dimensional platform game inspired by classic Mario games. Open source with level editor.",
                download_url: "https://github.com/Secretchronicles/TSC/releases",
                image_url: "https://secretchronicles.org/assets/img/screenshots/screenshot1.jpg",
                category: "Platformer"
            },
            
            // RACING GAMES
            {
                title: "SuperTuxKart",
                description: "3D open-source kart racing game with various characters and tracks. Play solo or multiplayer.",
                download_url: "https://github.com/supertuxkart/stk-code/releases/download/1.4/SuperTuxKart-1.4-win64.exe",
                image_url: "https://supertuxkart.net/images/thumb/e/ea/Supertuxkart-0.9.1-screenshot-3.jpg/1200px-Supertuxkart-0.9.1-screenshot-3.jpg",
                category: "Racing"
            },
            {
                title: "TORCS",
                description: "3D racing simulator focusing on realistic car physics. Create AI drivers or race yourself.",
                download_url: "https://sourceforge.net/projects/torcs/files/all-in-one/1.3.7/torcs-1.3.7-win32-setup.exe/download",
                image_url: "https://torcs.sourceforge.net/pics/screen/berniw-screen1.jpg",
                category: "Racing"
            },
            {
                title: "Speed Dreams",
                description: "Open source motorsport simulation with high quality graphics and physics. Based on TORCS.",
                download_url: "https://sourceforge.net/projects/speed-dreams/files/2.3.0/speed-dreams-2.3.0-r8382-win64-setup.exe/download",
                image_url: "https://www.speed-dreams.org/wp-content/uploads/2013/05/SD_Long_beach_1.jpg",
                category: "Racing"
            },
            
            // SIMULATION GAMES
            {
                title: "OpenTTD",
                description: "Business simulation game based on Transport Tycoon Deluxe. Build your transport empire across land, sea, and air.",
                download_url: "https://cdn.openttd.org/openttd-releases/14.1/openttd-14.1-windows-win64.zip",
                image_url: "https://www.openttd.org/static/img/screenshots/1.11/openttd-1.11.0-maglev-hub.png",
                category: "Simulation"
            },
            {
                title: "FlightGear",
                description: "Professional-grade open source flight simulator. Fly realistic aircraft around the entire world.",
                download_url: "https://sourceforge.net/projects/flightgear/files/release-2020.3/FlightGear-2020.3.19-x86_64-setup.exe/download",
                image_url: "https://www.flightgear.org/wp-content/uploads/2017/05/777_EDDF.jpg",
                category: "Simulation"
            },
            {
                title: "Simutrans",
                description: "Transportation simulation game. Connect cities with buses, trains, ships, and aircraft.",
                download_url: "https://sourceforge.net/projects/simutrans/files/simutrans/124-0/simutrans-win64-124-0.zip/download",
                image_url: "https://www.simutrans.com/images/screenshots/shot_1.png",
                category: "Simulation"
            },
            {
                title: "Minetest",
                description: "Open source voxel game engine. Build, explore, and survive in infinite blocky worlds. Like Minecraft, but free!",
                download_url: "https://github.com/minetest/minetest/releases/download/5.8.0/minetest-5.8.0-win64.zip",
                image_url: "https://www.minetest.net/media/gallery/1.jpg",
                category: "Sandbox"
            },
            
            // PUZZLE GAMES
            {
                title: "Frozen Bubble",
                description: "Addictive bubble shooter puzzle game. Match colored bubbles to clear the board before they reach the bottom.",
                download_url: "https://sourceforge.net/projects/frozen-bubble/files/frozen-bubble/2.2.1/frozen-bubble-2.2.1-setup.exe/download",
                image_url: "https://www.frozen-bubble.org/data/fb-1player.png",
                category: "Puzzle"
            },
            {
                title: "Pingus",
                description: "Lemmings-style puzzle game. Guide penguins through obstacles to safety using their special abilities.",
                download_url: "https://github.com/Pingus/pingus/releases",
                image_url: "https://pingus.gitlab.io/images/screenshots/snow-1.png",
                category: "Puzzle"
            },
            {
                title: "Enigma",
                description: "Puzzle game inspired by Oxyd. Roll a marble through over 1000 challenging levels.",
                download_url: "https://sourceforge.net/projects/enigma-game/files/Release%201.30/Enigma-1.30-win32.exe/download",
                image_url: "https://www.nongnu.org/enigma/screenshots/ss05.jpg",
                category: "Puzzle"
            },
            
            // ARCADE GAMES
            {
                title: "Chromium B.S.U.",
                description: "Fast-paced vertical shooter. Dodge bullets, destroy enemies, and survive as long as you can.",
                download_url: "https://sourceforge.net/projects/chromium-bsu/files/Chromium%20B.S.U./0.9.16.1/chromium-bsu-0.9.16.1-win32.zip/download",
                image_url: "https://chromium-bsu.sourceforge.io/ss00.png",
                category: "Arcade"
            },
            {
                title: "Armagetron Advanced",
                description: "3D Tron lightcycle game. Trap opponents with your trail in fast-paced multiplayer action.",
                download_url: "https://sourceforge.net/projects/armagetronad/files/armagetronad/0.2.9.2.3/Armagetronad-0.2.9.2.3.win32.exe/download",
                image_url: "https://www.armagetronad.org/screenshots/armagetron_ss_5.jpg",
                category: "Arcade"
            },
            {
                title: "Neverball",
                description: "3D puzzle arcade game. Tilt the floor to guide the ball through challenging obstacle courses.",
                download_url: "https://neverball.org/neverball-1.6.0-win32.zip",
                image_url: "https://neverball.org/screenshots/neverball-1.png",
                category: "Arcade"
            },
            {
                title: "OpenTyrian",
                description: "Classic vertical scrolling shooter. Upgrade your ship with powerful weapons and defeat epic bosses.",
                download_url: "https://github.com/opentyrian/opentyrian/releases/download/v2.1.20220318/opentyrian-2.1.20220318-windows.zip",
                image_url: "https://opentyrian.com/tyrian.png",
                category: "Arcade"
            },
            
            // ADVENTURE GAMES
            {
                title: "Beneath a Steel Sky",
                description: "Classic cyberpunk point-and-click adventure. Explore a dystopian future and uncover dark secrets.",
                download_url: "https://www.scummvm.org/frs/extras/Beneath%20a%20Steel%20Sky/bass-cd-1.2.zip",
                image_url: "https://www.gog.com/forum/general_archive/beneath_a_steel_sky_review/image/1/1",
                category: "Adventure"
            },
            {
                title: "Flight of the Amazon Queen",
                description: "Humorous point-and-click adventure set in the Amazon jungle. Great puzzles and witty dialogue.",
                download_url: "https://www.scummvm.org/frs/extras/Flight%20of%20the%20Amazon%20Queen/FOTAQ_Talkie-1.1.zip",
                image_url: "https://www.mobygames.com/images/covers/l/3940-flight-of-the-amazon-queen-dos-front-cover.jpg",
                category: "Adventure"
            },
            {
                title: "Lure of the Temptress",
                description: "Fantasy adventure game by Revolution Software. Explore a medieval world and solve puzzles.",
                download_url: "https://www.scummvm.org/frs/extras/Lure%20of%20the%20Temptress/lure-en-v1.1.zip",
                image_url: "https://www.mobygames.com/images/shots/l/29044-lure-of-the-temptress-dos-screenshot-title-screens.png",
                category: "Adventure"
            },
            
            // SPORTS GAMES
            {
                title: "Open Golf",
                description: "Free 3D mini-golf game. Play through creative courses with realistic physics.",
                download_url: "https://github.com/nicoya/OpenGolf/releases",
                image_url: "https://raw.githubusercontent.com/nicoya/OpenGolf/main/screenshots/screenshot1.png",
                category: "Sports"
            },
            {
                title: "Extreme Tux Racer",
                description: "Downhill racing game featuring Tux. Slide down snowy mountains collecting fish.",
                download_url: "https://sourceforge.net/projects/extremetuxracer/files/releases/etr-0.8.3/etr-0.8.3-win64.zip/download",
                image_url: "https://extremetuxracer.sourceforge.net/screenshots/etr_0.7_screenshot1.jpg",
                category: "Sports"
            },
            
            // CARD & BOARD GAMES
            {
                title: "PokerTH",
                description: "Texas Hold'em poker game. Play against AI or online with other players.",
                download_url: "https://sourceforge.net/projects/pokerth/files/pokerth/1.1.2/PokerTH-1.1.2-win32-setup.exe/download",
                image_url: "https://www.pokerth.net/sshots/pokerth-sshot-1.png",
                category: "Card"
            },
            {
                title: "PyChess",
                description: "Feature-rich chess application with powerful AI engine and online play support.",
                download_url: "https://github.com/pychess/pychess/releases/download/1.0.3/pychess-1.0.3.exe",
                image_url: "https://pychess.github.io/images/new_game.png",
                category: "Board"
            }
        ];

        const logDiv = document.getElementById('log');
        
        function log(message, type = 'info') {
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div class="${type}">[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        window.clearAllGames = async function() {
            log('üóëÔ∏è Clearing all existing games...', 'info');
            
            const { error } = await supabase
                .from('games')
                .delete()
                .neq('id', '00000000-0000-0000-0000-000000000000');
            
            if (error) {
                log('‚ùå Error clearing games: ' + error.message, 'error');
            } else {
                log('‚úÖ All games cleared successfully!', 'success');
            }
        }

        window.addAllGames = async function() {
            log('üéÆ Starting to add ' + freeGames.length + ' free games...', 'info');
            
            let successCount = 0;
            let errorCount = 0;
            
            for (const game of freeGames) {
                const { error } = await supabase
                    .from('games')
                    .insert([game]);
                
                if (error) {
                    log('‚ùå Failed to add "' + game.title + '": ' + error.message, 'error');
                    errorCount++;
                } else {
                    log('‚úÖ Added: ' + game.title, 'success');
                    successCount++;
                }
                
                // Small delay to avoid rate limiting
                await new Promise(r => setTimeout(r, 100));
            }
            
            log('', 'info');
            log('üìä SUMMARY: ' + successCount + ' games added, ' + errorCount + ' errors', 'info');
            log('üéÆ Go to https://gamezame.vercel.app to see your games!', 'success');
        }
        
        // Check auth on load
        const { data: { session } } = await supabase.auth.getSession();
        if (session) {
            log('‚úÖ Logged in as: ' + session.user.email, 'success');
            
            // Check if admin
            const { data: adminData } = await supabase
                .from('admins')
                .select('*')
                .eq('user_id', session.user.id)
                .single();
            
            if (adminData) {
                log('üîê Admin access confirmed!', 'success');
            } else {
                log('‚ö†Ô∏è Not an admin - you need to add yourself to admins table first', 'error');
            }
        } else {
            log('‚ö†Ô∏è Not logged in. Please login at https://gamezame.vercel.app first', 'error');
        }
    </script>
</body>
</html>
